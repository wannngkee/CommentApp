(this.webpackJsonpcomment=this.webpackJsonpcomment||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),o=n(8),s=n.n(o),r=(n(20),n(2)),m=n(3),i=n(5),u=n(4),l=n(6),h=n(7),p=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this,e)).handleUsernameChange=function(e){c.setState({username:e.target.value})},c.handleContentChange=function(e){c.setState({content:e.target.value})},c.handleSubmit=function(){c.props.onSubmit&&c.props.onSubmit({username:c.state.username,content:c.state.content,createdTime:+new Date}),c.setState({content:""})},c.handleUsernameBlur=function(e){c.props.onUserNameInputBlur&&c.props.onUserNameInputBlur(e.target.value)},c.state={username:e.username},c}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.textarea.focus()}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:"comment-inptut",children:[Object(c.jsxs)("div",{className:"comment-field",children:[Object(c.jsx)("span",{className:"comment-field-name",children:"\u7528\u6237\u540d\uff1a"}),Object(c.jsx)("div",{className:"comment-field-input",children:Object(c.jsx)("input",{value:this.state.username,onBlur:this.handleUsernameBlur,onChange:this.handleUsernameChange})})]}),Object(c.jsxs)("div",{className:"comment-field",children:[Object(c.jsx)("span",{className:"comment-field-name",children:"\u8bc4\u8bba\uff1a"}),Object(c.jsx)("div",{className:"comment-field-input",children:Object(c.jsx)("textarea",{ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleContentChange})})]}),Object(c.jsx)("div",{className:"comment-field-button",children:Object(c.jsx)("button",{onClick:this.handleSubmit,children:"\u53d1\u5e03"})})]})}}]),n}(a.Component);p.defaultProps={username:"",content:""};var d="INIT_COMMENTS",j="ADD_COMMENT",b="DELETE_COMMENT";var f=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleSubmitComment=function(t){if(t){if(!t.username)return alert("\u8bf7\u8f93\u5165\u7528\u6237\u540d");if(!t.content)return alert("\u8bf7\u8f93\u5165\u5185\u5bb9");var n=e.props.comments,c=[].concat(Object(l.a)(n),[t]);localStorage.setItem("commets",JSON.stringify(c)),e.props.onSubmit&&e.props.onSubmit(t)}},e.state={username:""},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._loadUsername()}},{key:"_loadUsername",value:function(){var e=localStorage.getItem("username");e&&this.setState({username:e})}},{key:"_saveUsername",value:function(e){localStorage.setItem("username",e)}},{key:"render",value:function(){return Object(c.jsx)(p,{username:this.state.username,onUserNameInputBlur:this._saveUsername.bind(this),onSubmit:this.handleSubmitComment})}}]),n}(a.Component),O=Object(h.b)((function(e){return{comments:e.comments}}),(function(e){return{onSubmit:function(t){e(function(e){return{type:j,comment:e}}(t))}}}))(f),v=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleDeleteComment=function(){e.props.onDeleteComment&&e.props.onDeleteComment(e.props.index)},e.state={timeString:""},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._updateTimeString(),this._timer=setInterval(this._updateTimeString.bind(this),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._timer)}},{key:"_updateTimeString",value:function(){var e=this.props.comment,t=(+Date.now()-e.createdTime)/1e3;this.setState({timeString:t>60?"".concat(Math.round(t/60)," \u5206\u949f\u524d"):"".concat(Math.round(Math.max(t,1))," \u79d2\u524d")})}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsxs)("div",{className:"comment-user",children:[Object(c.jsxs)("span",{children:[this.props.comment.username," "]}),":"]}),Object(c.jsxs)("p",{children:["\xa0",this.props.comment.content]}),Object(c.jsx)("span",{className:"comment-createdtime",children:this.state.timeString}),Object(c.jsx)("span",{className:"comment-delete",onClick:this.handleDeleteComment,children:"\u5220\u9664"})]})}}]),n}(a.Component),C=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleDeleteComment=function(t){e.props.onDeleteComment&&e.props.onDeleteComment(t)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{children:this.props.comments.map((function(t,n){return Object(c.jsx)(v,{comment:t,index:n,onDeleteComment:e.handleDeleteComment},n)}))})}}]),n}(a.Component);C.defaultProps={comments:[]};var x=C,g=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleDeleteComment=function(t){var n=e.props.comments,c=[].concat(Object(l.a)(n.slice(0,t)),Object(l.a)(n.slice(t+1)));localStorage.setItem("comments",JSON.stringify(c)),e.props.onDeleteComment&&e.props.onDeleteComment(t)},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._loadComments()}},{key:"_loadComments",value:function(){var e=localStorage.getItem("comments");e=e?JSON.parse(e):[],this.props.initComments(e)}},{key:"render",value:function(){return Object(c.jsx)(x,{comments:this.props.comments,onDeleteComment:this.handleDeleteComment})}}]),n}(a.Component),S=Object(h.b)((function(e){return{comments:e.comments}}),(function(e){return{initComments:function(t){e(function(e){return{type:d,comments:e}}(t))},onDeleteComment:function(t){e(function(e){return{type:b,commentIndex:e}}(t))}}}))(g),y=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"wrapper",children:[Object(c.jsx)(O,{}),Object(c.jsx)(S,{})]})}}]),n}(a.Component),D=n(9),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))},k=Object(D.b)((function(e,t){switch(e||(e={comments:[]}),t.type){case d:return{comments:t.comments};case j:return{comments:[].concat(Object(l.a)(e.comments),[t.comment])};case b:return{comments:[].concat(Object(l.a)(e.comments.slice(0,t.commentIndex)),Object(l.a)(e.comments.slice(t.commentIndex+1)))};default:return e}}));s.a.render(Object(c.jsx)(h.a,{store:k,children:Object(c.jsx)(y,{})}),document.getElementById("root")),N()}},[[27,1,2]]]);
//# sourceMappingURL=main.9ed55d6b.chunk.js.map